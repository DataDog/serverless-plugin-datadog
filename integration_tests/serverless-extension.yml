service: dd-sls-plugin-integration-test
frameworkVersion: "3"

plugins:
  - ../dist/src

provider:
  name: aws
  region: sa-east-1
  layers:
    - { Ref: ProviderLevelLayerLambdaLayer }

custom:
  datadog:
    addExtension: true
    apiKey: 1234
    enableSourceCodeIntegration: false
    testingMode: true
    integrationTesting: true
    exclude:
      - ExcludeThis

functions:
  PythonHello37:
    handler: py_handler.hello
    runtime: python3.7
  PythonHello38:
    handler: py_handler.hello
    runtime: python3.8
  PythonHello39:
    handler: py_handler.hello
    runtime: python3.9
  PythonHello310:
    handler: py_handler.hello
    runtime: python3.10
  PythonHello311:
    handler: py_handler.hello
    runtime: python3.11
  PythonHello312:
    handler: py_handler.hello
    runtime: python3.12
  PythonHello313:
    handler: py_handler.hello
    runtime: python3.13
  PythonHello314:
    handler: py_handler.hello
    runtime: python3.14
  JavascriptHello16-x:
    handler: js_handler.hello
    runtime: nodejs16.x
    layers:
      - { Ref: FunctionLevelLayerLambdaLayer }
  JavascriptHello18-x:
    handler: js_handler.hello
    runtime: nodejs18.x
  JavascriptHello20-x:
    handler: js_handler.hello
    runtime: nodejs20.x
  JavascriptHello22-x:
    handler: js_handler.hello
    runtime: nodejs22.x
  JavascriptHello24-x:
    handler: js_handler.hello
    runtime: nodejs24.x
  ExcludeThis:
    handler: js_handler.hello
    runtime: nodejs20.x
  DotnetHello6:
    handler: dotnet_handler.hello
    runtime: dotnet6
  DotnetArmHello6:
    handler: dotnet_handler.hello
    runtime: dotnet6
    architecture: arm64
  DotnetHello8:
    handler: dotnet_handler.hello
    runtime: dotnet8
  DotnetArmHello8:
    handler: dotnet_handler.hello
    runtime: dotnet8
    architecture: arm64
  DotnetHello10:
    handler: dotnet_handler.hello
    runtime: dotnet10
  DotnetArmHello10:
    handler: dotnet_handler.hello
    runtime: dotnet10
    architecture: arm64
  JavaHello8:
    handler: java_handler.hello
    runtime: java8
  JavaHello11:
    handler: java_handler.hello
    runtime: java11
  JavaHello17:
    handler: java_handler.hello
    runtime: java17
  JavaHello21:
    handler: java_handler.hello
    runtime: java21
  providedHello:
    handler: provided_handler.hello
    runtime: provided
  providedAl2Hello:
    handler: provided_handler.hello
    runtime: provided.al2
  providedAl2023Hello:
    handler: provided_handler.hello
    runtime: provided.al2023
  RubyHello32:
    handler: rb_handler.hello
    runtime: ruby3.2
  RubyHello33:
    handler: rb_handler.hello
    runtime: ruby3.3
  RubyHello34:
    handler: rb_handler.hello
    runtime: ruby3.4
layers:
  ProviderLevelLayer:
    path: ProviderLevelLayer # required, path to layer contents on disk
    name: ${self:service}-${sls:stage}-ProviderLevelLayer # optional, Deployed Lambda layer name
    description: It's a text file # optional, Description to publish to AWS
    compatibleRuntimes: # optional, a list of runtimes this layer is compatible with
      - nodejs20.x
  FunctionLevelLayer:
    path: FunctionLevelLayer
    name: ${self:service}-${sls:stage}-FunctionLevelLayer # optional, Deployed Lambda layer name
    description: It's also a text file # optional, Description to publish to AWS
